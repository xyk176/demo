<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.model.mdao.BeputMapper">
  <resultMap id="BaseResultMap" type="com.demo.pojo.Beput">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="beid" jdbcType="INTEGER" property="beid" />
    <result column="beclass" jdbcType="VARCHAR" property="beclass" />
    <result column="bedate" jdbcType="TIMESTAMP" property="bedate" />
    <result column="beremark" jdbcType="VARCHAR" property="beremark" />
    <result column="yewuid" jdbcType="INTEGER" property="yewuid" />
    <association property="supplier" javaType="com.demo.pojo.Supplier">
      <id column="suid" jdbcType="INTEGER" property="suid" />
      <result column="suname" jdbcType="VARCHAR" property="suname" />
      <result column="suphone" jdbcType="VARCHAR" property="suphone" />
      <result column="susheng" jdbcType="VARCHAR" property="susheng" />
      <result column="sushi" jdbcType="VARCHAR" property="sushi" />
      <result column="suqu" jdbcType="VARCHAR" property="suqu" />
      <result column="sulxr" jdbcType="VARCHAR" property="sulxr" />
      <result column="sulxrphone" jdbcType="VARCHAR" property="sulxrphone" />
      <result column="suqq" jdbcType="VARCHAR" property="suqq" />
      <result column="suwx" jdbcType="VARCHAR" property="suwx" />
      <result column="suemail" jdbcType="VARCHAR" property="suemail" />
      <result column="sufax" jdbcType="VARCHAR" property="sufax" />
    </association>
    <collection property="beputxqs" ofType="Beputxq">
      <id column="bexqid" jdbcType="INTEGER" property="bexqid" />
      <result column="libecount" jdbcType="INTEGER" property="libecount" />
      <association property="product" javaType="com.demo.pojo.SpProduct">
        <id column="lid" jdbcType="INTEGER" property="lid" />
        <result column="lname" jdbcType="VARCHAR" property="lname" />
        <result column="lguige" jdbcType="VARCHAR" property="lguige" />
        <result column="ldanwei" jdbcType="VARCHAR" property="ldanwei" />
        <result column="ltiaoma" jdbcType="INTEGER" property="ltiaoma" />
        <result column="lchengben" jdbcType="DECIMAL" property="lchengben" />
      </association>
    </collection>
  </resultMap>
  <select id="selectbeputxq" resultMap="BaseResultMap">
    <!--
     查看入库单详情
     -->
    select *
    from beput b
    left join supplier s on b.suid=s.suid
    inner join beputxq bx on b.beid=bx.beid
    inner join sp_product sp on bx.lid=sp.lid
    where b.beid=#{beid}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from beput
    where beid = #{beid,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.demo.pojo.Beput" useGeneratedKeys="true" keyProperty="beid">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into beput (beid, suid, beclass, 
      bedate, beremark, yewuid
      )
    values (#{beid,jdbcType=INTEGER}, #{supplier.suid,jdbcType=INTEGER}, #{beclass,jdbcType=VARCHAR},
      #{bedate,jdbcType=TIMESTAMP}, #{beremark,jdbcType=VARCHAR}, #{yewuid,jdbcType=INTEGER}
      )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.demo.pojo.Beput">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update beput
    set suid = #{suid,jdbcType=INTEGER},
      beclass = #{beclass,jdbcType=VARCHAR},
      bedate = #{bedate,jdbcType=TIMESTAMP},
      beremark = #{beremark,jdbcType=VARCHAR},
      yewuid = #{yewuid,jdbcType=INTEGER}
    where beid = #{beid,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select beid, suid, beclass, bedate, beremark, yewuid
    from beput
    where beid = #{beid,jdbcType=INTEGER}
  </select>

  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select *
    from beput b  left join supplier s on b.suid=s.suid
    <where>
      <if test="beclass!=null and beclass!=''">
        and b.beclass like concat('%',#{beclass},'%')
      </if>
      <if test="beid!=null and beid!=''">
        and b.beid like concat('%',#{beid},'%')
      </if>
      <if test="yewuid!=null and yewuid!=''">
        and b.yewuid like concat('%',#{yewuid},'%')
      </if>
      <if test="suname!=null and suname!=''">
        and s.suname like concat('%',#{suname},'%')
      </if>
      <if test="date1!=null and date1!=''">
        and b.bedate between #{date1} and #{date2}
      </if>
    </where>
  </select>
</mapper>